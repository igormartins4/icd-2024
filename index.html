<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabalho Prático - ICD 2024/1</title>
    <link rel="stylesheet" href="style.css">

    <link rel="icon" href="./assets/favicon.svg">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;1,400;1,500&display=swap"
        rel="stylesheet">
</head>

<body>
    <header>
        <h1>Geração de Dieta Personalizada Para Diabéticos</h1>
        <h2>Projeto Final de Introdução à Ciência de Dados</h2>
        <h3>Trabalho ICD 24/1 - Grupo 19</h3>
        <h4>Arthur Ramos, Gabriel Coelho, Gabriel Marra, Igor Martins</h4>
    </header>


    <main class="container">
        <h2>Sumário</h2>
        <ol>
            <li><a href="#introducao">Introdução</a></li>
            <li><a href="#motivacao">Motivação</a></li>
            <li><a href="#dados">Dados Utilizados</a></li>
            <li><a href="#perguntas">Perguntas</a></li>
            <li><a href="#analise">Análise Exploratória dos Dados</a></li>
            <li><a href="#hipotese">Teste de Hipótese</a></li>
            <li><a href="#regressao">Modelos de Regressão</a></li>
        </ol>

        <h2 id="introducao">Introdução</h2>
        <p>Neste trabalho, iremos analisar como a composição de macronutrientes de um determinado alimento impacta nos
            seus respectivos índice glicêmico (GI) e carga glicêmica (GL).
        </p>

        <h2 id="motivacao">Motivação</h2>
        <p>Explicando brevemente, como consta na fonte de nossa base de dados:</p>

        <blockquote>
            “O Índice Glicêmico (GI) é uma medida da rapidez com que um determinado alimento pode aumentar os seus
            níveis de açúcar no sangue. [...] O GI de um alimento é determinado medindo a área incremental sob a curva
            do nível de açúcar no sangue em duas horas (AUC) após um período de 12 horas de jejum e ingestão do alimento
            que tem uma certa quantidade de carboidratos disponíveis (geralmente 50 g). A AUC do alimento testado é
            dividida pela AUC do padrão (glicose ou pão branco, com duas definições distintas) e multiplicada por 100. O
            valor médio do GI é determinado a partir dos dados obtidos de 10 participantes humanos. [...]
        </blockquote>

        <blockquote>
            O Índice Glicêmico é uma medida importante da rapidez com que determinados alimentos podem afetar os níveis
            de açúcar no sangue. Conhecer e compreender os valores do GI dos diferentes alimentos pode ajudá-lo a fazer
            escolhas alimentares informadas para ajudar a manter níveis saudáveis de açúcar no sangue.”
        </blockquote>

        <p>A partir daí, é introduzida a carga glicêmica (GL): </p>

        <blockquote>
            “O GI é uma medida da rapidez com que um determinado alimento é convertido em glicose, e é expresso numa
            escala de 1 a 100 (sendo 100 a conversão mais rápida). O GL vai mais longe, tendo em conta não só a
            velocidade de conversão da glicose, mas também a quantidade de carboidratos contidos num determinado
            alimento. Para calcular o GL, é utilizada a seguinte fórmula: GL = (GI x quantidade de carboidratos
            disponíveis por porção) dividido por 100.”
        </blockquote>

        <p>Portanto, em nosso trabalho, iremos focar em pesquisar se é possível descobrir o GI e, consequentemente, o GL
            de um alimento apenas pela quantidade de carboidratos, proteínas e gorduras informados em sua tabela
            nutricional. Caso possível, tal procedimento seria de grande ajuda a pacientes diabéticos, que precisam
            manter controle assíduo dos seus níveis de glicose no sangue e por conseguinte da sua alimentação.
        </p>

        <h2 id="dados">Dados Utilizados</h2>

        <p>
            Utilizamos os dados presentes no site
            <a href="https://glycemic-index.net/">Glycemic Index Guide</a>. Estas são as principais features:
        <ol>
            <li>nome do alimento</li>
            <li>categoria</li>
            <li>calorias</li>
            <li>carboidratos</li>
            <li>proteínas</li>
            <li>gorduras</li>
            <li>GI</li>
            <li>GL</li>
        </ol>
        </p>

        <h2 id="perguntas">Perguntas</h2>
        <ol>
            <li>Quais são os alimentos menos recomendáveis para diabéticos? E os mais? O que eles têm em comum? Um
                modelo preditivo consegue identificá-los de maneira eficaz e evitar uns e priorizar outros?</li>
            <li>É possível gerar recomendações de dieta para diabéticos por meio de machine learning que sejam
                personalizadas, se adequando a seus hábitos e preferências?</li>
            <li>O que faz do nutricionista um profissional não substituível por uma inteligência artificial? Quais são
                as principais limitações de um modelo preditivo para essa finalidade?</li>
        </ol>

        <h2 id="analise">Análise Exploratória dos Dados</h2>
        <p>
            De acordo com a própria fonte, <q>Foods with the <a
                    href="https://glycemic-index.net/glossary/high-gi/">highest GI</a> are generally composed of sugars
                and simple <a href="https://glycemic-index.net/glossary/carbohydrates/">carbohydrates</a>, which can
                cause spikes in <a href="https://glycemic-index.net/glossary/blood-sugar-level/">blood sugar
                    levels</a>.</q>
        </p>

        <p>
            Em tese, cada grama de carboidrato corresponde a 4 kcal. Podemos observar que a base de dados não
            corresponde a essa conta, o que nos leva a desconfiar do número de calorias. Portanto, foi criada uma
            feature <code>“real_calories”</code> que calcula as calorias do alimento multiplicando:
        <ul>
            <li>Gramas de carboidratos e proteínas por 4</li>
            <li>Gramas de gorduras por 9</li>
        </ul>

        A partir daí, foi calculada a feature <code>“carbs_kcal_perc”</code>, que pega a porcentagem de calorias do
        alimento que são provenientes de carboidratos. Depois, foi adicionada a feature <code>“low_gl”</code>, binária
        que simplesmente calcula se o GL do alimento é menor ou igual a 10 ou não.
        </p>

        <p>Adicionando um pequeno desvio na última, esta visualização é gerada:</p>

        <img src="./assets/grafico-um.png" alt="Gráfico de kilocalorias versus baixo GL">

        <p>
            Com isso, é possível perceber que alimentos com alta % de calorias provenientes de carboidratos têm uma
            tendência maior a serem altos em GL! Esse é um ótimo indício de alimentos a serem evitados por diabéticos.
        </p>

        <p>
            Existem vários alimentos com GL = 0. Todos esses alimentos são alimentos com baixíssima quantidade de
            carboidratos por 100g (o que mais contém, tem 7g). Isso faz muito sentido considerando que o GL é calculado
            pelo <code>GI * carbs / 100</code>. Entretanto, como nem todos tem o carboidrato zerado, isso também é um
            ótimo indicativo
            que uma baixa quantidade de carboidratos significa um baixo GI.
        </p>

        <p>
            Ao se gerar o gráfico comparativo, incluindo uma regressão linear, percebe-se que a correlação dos dados é
            positiva, mas não muito forte.
        </p>

        <img src="./assets/grafico-dois.png" alt="Gráfico de índice glicêmico versus carboidratos">

        <p>
            Interessantemente, olhando-se a média do GL por categoria, percebe-se que os maiores GLs são de categorias
            costumeiramente constituídas principalmente por carboidratos (vermelho) ou gorduras (amarelo):
        </p>

        <table>
            <tr>
                <th>Categoria</th>
                <th>GL Médio</th>
            </tr>
            <tr id="table-carbohydrate">
                <td>Baked products</td>
                <td>31.99</td>
            </tr>
            <tr>
                <td>Beverages</td>
                <td>4.53</td>
            </tr>
            <tr>
                <td>Dairy</td>
                <td>3.7</td>
            </tr>
            <tr id="table-carbohydrate">
                <td>Fast foods</td>
                <td>30.56</td>
            </tr>
            <tr>
                <td>Fruits</td>
                <td>10.38</td>
            </tr>
            <tr id="table-fat">
                <td>Grains</td>
                <td>28.61</td>
            </tr>
            <tr>
                <td>Greens</td>
                <td>7.64</td>
            </tr>
            <tr>
                <td>Meat</td>
                <td>0.84</td>
            </tr>
            <tr>
                <td>Mushrooms</td>
                <td>1.35</td>
            </tr>
            <tr>
                <td>Nuts</td>
                <td>7.5</td>
            </tr>
            <tr>
                <td>Oils and sauces</td>
                <td>1.02</td>
            </tr>
            <tr>
                <td>Seafood</td>
                <td>0.7</td>
            </tr>
            <tr>
                <td>Soups</td>
                <td>2.9</td>
            </tr>
            <tr>
                <td>Spices</td>
                <td>5.07</td>
            </tr>
            <tr id="table-carbohydrate">
                <td>Sweets</td>
                <td>38.51</td>
            </tr>
            <tr>
                <td>Vegetables</td>
                <td>3.5</td>
            </tr>
            <tr>
                <td>Other</td>
                <td>18.59</td>
            </tr>
        </table>

        <h2 id="hipotese">Teste de Hipótese</h2>
        <p>Categorias onde os alimentos são majoritariamente compostos de carboidratos e gorduras tendem a ter GL mais
            alto. Para testar a hipótese, podemos fazer um teste de permutação: embaralhamos as categorias dos
            alimentos, calculamos as médias e vemos se os valores que encontramos originalmente podem ser explicados
            pelo acaso ou se são de fato raros de se acontecer, implicando que nossa tese tem validade.</p>

        <ol>
            <li>Hipótese nula: (H0): As GLs médias das categorias que observamos pode ocorrer ao acaso</li>
            <li>Hipótese alternativa (HA): Alimentos com maior fração de carboidratos em sua composição têm maior GL, na
                média.</li>
        </ol>

        <img src="./assets/grafico-tres.png" alt="Gráfico de ocorrências e médias de Baked products">
        <img src="./assets/grafico-quatro.png" alt="Gráfico de ocorrências e médias de Beverages">
        <img src="./assets/grafico-cinco.png" alt="Gráfico de ocorrências e médias de Dairy">
        <img src="./assets/grafico-seis.png" alt="Gráfico de ocorrências e médias de Fast foods">
        <img src="./assets/grafico-sete.png" alt="Gráfico de ocorrências e médias de Fruits">
        <img src="./assets/grafico-oito.png" alt="Gráfico de ocorrências e médias de Grains">
        <img src="./assets/grafico-nove.png" alt="Gráfico de ocorrências e médias de Greens">
        <img src="./assets/grafico-dez.png" alt="Gráfico de ocorrências e médias de Meat">
        <img src="./assets/grafico-onze.png" alt="Gráfico de ocorrências e médias de Mushrooms">
        <img src="./assets/grafico-doze.png" alt="Gráfico de ocorrências e médias de Nuts">
        <img src="./assets/grafico-treze.png" alt="Gráfico de ocorrências e médias de Oils and sauces">
        <img src="./assets/grafico-catorze.png" alt="Gráfico de ocorrências e médias de Other">
        <img src="./assets/grafico-quinze.png" alt="Gráfico de ocorrências e médias de Seafood">
        <img src="./assets/grafico-dezesseis.png" alt="Gráfico de ocorrências e médias de Soups">
        <img src="./assets/grafico-dezessete.png" alt="Gráfico de ocorrências e médias de Spices">
        <img src="./assets/grafico-dezoito.png" alt="Gráfico de ocorrências e médias de Sweets">
        <img src="./assets/grafico-dezenove.png" alt="Gráfico de ocorrências e médias de Vegetables">

        <p>Executamos diversos intervalos de confiança, e podemos notar que, na maioria deles, os valores observados
            estão fora do intervalo de confiança, o que nos permite rejeitar a hipótese nula de que os valores que
            observamos são explicados pelo acaso. Isso nos dá mais confiança de que nossa hipótese alternativa está
            correta, e que alimentos onde a maior parte das calorias vem de carboidratos e gorduras têm GL maior, sendo
            assim alimentos que devem ser evitados por pessoas com diabetes.

        </p>

        <ol>
            <li>Os casos em que os valores estão dentro do IC podem ser facilmente explicados pelo número de elementos:
                categorias como Sopas, Frutos do mar e Cogumelos são muito pequenas (5, 5 e 2 alimentos,
                respectivamente). Isso aumenta a variabilidade das médias, alargando os Intervalos de Confiança para
                cobrir uma faixa de valores maior.</li>
        </ol>

        <h2 id="regressao">Modelos de Regressão</h2>
        <p>Além das análises exploratórias que fizemos dos dados, o nosso teste de hipótese nos confirmou que de fato há
            uma correlação entre a composição em macronutrientes do alimento (em especial carboidratos e gorduras) e o
            GL dele. Com base nesses indícios, podemos treinar um modelo de regressão para prever o valor do GL de um
            alimento a partir de suas informações nutricionais.</p>
        <p>Inicialmente, tentamos duas abordagens: uma regressão múltipla com regularização L2 e uma regressão baseada
            em vizinhos mais próximos. Utilizamos também a validação cruzada para evitar um overfitting dos nossos
            dados, na busca de encontrar um modelo que generalize melhor. Abaixo estão os resultados que encontramos,
            utilizando a biblioteca SciKit Learn.</p>


        <br>
        <br>
        <br>
        <br>

        <h1>COLOCAR UM GRÁFICO AQUI</h1>

        <br>
        <br>

        <H1>COLOCAR OUTRO GRÁFICO AQUI</H1>

        <br>
        <br>
        <br>
        <br>


        <p>Olhando para o valor do R2 de cada um dos modelos, avaliado nos dados de teste, vemos que a regressão
            múltipla se saiu melhor que o KNN, e por isso escolhemos esse modelo para prosseguir.</p>

        <p>Para desenvolvermos nosso modelo final, utilizamos a biblioteca statsmodels, pois ela nos apresenta
            resultados mais detalhados, que facilitam a criação de um modelo mais polido.</p>



        <p>O relatório de regressão acima, gerado com a biblioteca statsmodels, mostra os intervalos de confiança para
            os coeficientes da nossa regressão. Os intervalos que contém o valor 0 correspondem a variáveis que podem
            possivelmente ser eliminadas do nosso modelo, para reduzir a variância e encontrar um modelo que generalize
            melhor.</p>


        <!-- 
            <table>
                <tr>
                    <th>Dep. Variable</th>
                    <th>Model</th>
                    <th>Method</th>
                    <th>Date</th>
                    <th>Time</th>
                    <th>No. Observations</th>
                    <th>Df Residuals</th>
                    <th>Df Model</th>
                    <th>Covariance Type</th>
                    <th>R-squared</th>
                    <th>Adj. R-squared</th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
                <tr>
                   <td></td>
                </tr>
               

            </table> -->









    </main>

    <footer>
        <p>Arthur Ramos, Gabriel Coelho, Gabriel Marra, Igor Martins © 2024 MIT License</p>
    </footer>


</body>

</html>